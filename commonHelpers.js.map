{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function searchImages(userRequest, page, perPage) {\n  const personalKey = '42394158-5c4cd21eee44163ae27aefe31';\n  const url = `https://pixabay.com/api/?key=${personalKey}&q=${userRequest}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.data.message || 'An error occurred.');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport function showLoader(container) {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  container.append(loader);\n}\n\nexport function hideLoader(loader) {\n  if (loader) {\n    loader.remove();\n  }\n}\n\nexport function renderGallery(data, gallery) {\n  if (data.hits.length === 0) {\n    showSearchErrorMessage();\n  } else {\n    const markup = data.hits\n      .map(item => {\n        return `<li class=\"gallery-item\"><a href=\"${item.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${item.webformatURL}\" alt=\"${item.tags}\"></a>\n          <p><b>Likes: </b>${item.likes}</p>\n          <p><b>Views: </b>${item.views}</p>\n          <p><b>Comments: </b>${item.comments}</p>\n          <p><b>Downloads: </b>${item.downloads}</p>\n        </li>`;\n      })\n      .join('');\n    gallery.insertAdjacentHTML('afterbegin', markup);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionSelector: 'img',\n      captionType: 'attr',\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n      animation: 250,\n    });\n\n    lightbox.refresh();\n  }\n}\n\nexport function hideEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\n\nexport function showEndMessage() {\n  const endMessage = document.createElement('div');\n  endMessage.classList.add('end-message');\n  endMessage.textContent =\n    \"We're sorry, but you've reached the end of search results.\";\n  document.body.appendChild(endMessage);\n}\n\nexport function scrollToNextGroup() {\n  const cardHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\n","import iziToast from 'izitoast';\nimport { searchImages } from './js/pixabay-api';\nimport {\n  showLoader,\n  hideLoader,\n  renderGallery,\n} from './js/render-functions.js';\nwindow.iziToast = iziToast;\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst inputData = document.querySelector('input');\nconst loader = document.querySelector('.loader');\n\nlet currentPage = 1;\nlet userRequest = '';\nconst imagesPerPage = 15;\nloadMoreButton.style.display = 'none';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  userRequest = inputData.value.trim();\n  currentPage = 1;\n\n  if (!userRequest) {\n    iziToast.error({\n      message: 'Please enter a valid search query.',\n      position: 'topRight',\n    });\n    loadMoreButton.style.display = 'none';\n    gallery.innerHTML = '';\n    return;\n  }\n\n  showLoader(loader);\n  gallery.innerHTML = '';\n\n  try {\n    const data = await searchImages(userRequest, currentPage, imagesPerPage);\n    const currentScrollY = window.scrollY;\n    renderGallery(data, gallery);\n\n    if (data.totalHits > currentPage * imagesPerPage) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      loadMoreButton.style.display = 'none';\n      showEndMessage();\n    }\n  } catch (error) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(loader);\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage++;\n\n  try {\n    showLoader(loader);\n    const data = await searchImages(userRequest, currentPage, imagesPerPage);\n    const currentScrollY = window.scrollY;\n    renderGallery(data, gallery);\n\n    if (data.totalHits > currentPage * imagesPerPage) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      loadMoreButton.style.display = 'none';\n      showEndMessage();\n    }\n\n    window.scrollTo({\n      top: currentScrollY + gallery.lastElementChild.clientHeight,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(loader);\n  }\n});\n"],"names":["searchImages","userRequest","page","perPage","url","axios","error","showLoader","container","loader","hideLoader","renderGallery","data","gallery","markup","item","SimpleLightbox","iziToast","form","loadMoreButton","inputData","currentPage","imagesPerPage","e","currentScrollY"],"mappings":"owBACO,eAAeA,EAAaC,EAAaC,EAAMC,EAAS,CAE7D,MAAMC,EAAM,qEAAiDH,CAAW,iEAAiEC,CAAI,aAAaC,CAAO,GAEjK,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,KAAK,SAAW,oBAAoB,CACpE,CACH,CCPO,SAASC,EAAWC,EAAW,CACpC,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BD,EAAU,OAAOC,CAAM,CACzB,CAEO,SAASC,EAAWD,EAAQ,CAC7BA,GACFA,EAAO,OAAM,CAEjB,CAEO,SAASE,EAAcC,EAAMC,EAAS,CAC3C,GAAID,EAAK,KAAK,SAAW,EACvB,6BACK,CACL,MAAME,EAASF,EAAK,KACjB,IAAIG,GACI,qCAAqCA,EAAK,aAAa;AAAA,4CAC1BA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA,6BACnDA,EAAK,KAAK;AAAA,6BACVA,EAAK,KAAK;AAAA,gCACPA,EAAK,QAAQ;AAAA,iCACZA,EAAK,SAAS;AAAA,cAExC,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,aAAcC,CAAM,EAE9B,IAAIE,EAAe,aAAc,CAChD,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,UAAW,GACjB,CAAK,EAEQ,QAAO,CACjB,CACH,CCtCA,OAAO,SAAWC,EAElB,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCL,EAAU,SAAS,cAAc,UAAU,EAC3CM,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAY,SAAS,cAAc,OAAO,EAC1CX,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIY,EAAc,EACdpB,EAAc,GAClB,MAAMqB,EAAgB,GACtBH,EAAe,MAAM,QAAU,OAE/BD,EAAK,iBAAiB,SAAU,MAAMK,GAAK,CAKzC,GAJAA,EAAE,eAAc,EAChBtB,EAAcmB,EAAU,MAAM,OAC9BC,EAAc,EAEV,CAACpB,EAAa,CAChBgB,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAChB,CAAK,EACDE,EAAe,MAAM,QAAU,OAC/BN,EAAQ,UAAY,GACpB,MACD,CAEDN,EAAWE,CAAM,EACjBI,EAAQ,UAAY,GAEpB,GAAI,CACF,MAAMD,EAAO,MAAMZ,EAAaC,EAAaoB,EAAaC,CAAa,EACjEE,EAAiB,OAAO,QAC9Bb,EAAcC,EAAMC,CAAO,EAEvBD,EAAK,UAAYS,EAAcC,EACjCH,EAAe,MAAM,QAAU,SAE/BA,EAAe,MAAM,QAAU,OAC/B,iBAEH,MAAe,CACdF,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAChB,CAAK,CACL,QAAY,CACRP,EAAWD,CAAM,CAClB,CACH,CAAC,EAEDU,EAAe,iBAAiB,QAAS,SAAY,CACnDE,IAEA,GAAI,CACFd,EAAWE,CAAM,EACjB,MAAMG,EAAO,MAAMZ,EAAaC,EAAaoB,EAAaC,CAAa,EACjEE,EAAiB,OAAO,QAC9Bb,EAAcC,EAAMC,CAAO,EAEvBD,EAAK,UAAYS,EAAcC,EACjCH,EAAe,MAAM,QAAU,SAE/BA,EAAe,MAAM,QAAU,OAC/B,kBAGF,OAAO,SAAS,CACd,IAAKK,EAAiBX,EAAQ,iBAAiB,aAC/C,SAAU,QAChB,CAAK,CACF,MAAe,CACdI,EAAS,MAAM,CACb,QAAS,6DACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRP,EAAWD,CAAM,CAClB,CACH,CAAC"}